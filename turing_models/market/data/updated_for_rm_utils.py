# -*- coding: utf-8 -*-
"""
Created on Thu Oct 28 17:13:33 2021

@author: Dingjn
"""

import QuantLib as ql


def calendarModifyChina(calendar):
    removeList = ['2021-02-07',
                  '2021-02-20',
                  '2021-04-25',
                  '2021-05-08',
                  '2021-09-18',
                  '2021-09-26',
                  '2021-10-09',

                  '2022-01-29',
                  '2022-01-30',
                  '2022-04-02',
                  '2022-04-24',
                  '2022-05-07',
                  '2022-10-08',
                  '2022-10-09']

    addList = ['2021-01-01',
               '2021-12-31',
               '2021-02-11',
               '2021-02-12',
               '2021-02-13',
               '2021-02-14',
               '2021-02-15',
               '2021-02-16',
               '2021-02-17',
               '2021-04-05',
               '2021-05-01',
               '2021-05-02',
               '2021-05-03',
               '2021-05-04',
               '2021-05-05',
               '2021-06-14',
               '2021-09-19',
               '2021-09-20',
               '2021-09-21',
               '2021-10-01',
               '2021-10-02',
               '2021-10-03',
               '2021-10-04',
               '2021-10-05',
               '2021-10-06',
               '2021-10-07',

               '2022-01-03',
               '2022-01-31',
               '2022-02-01',
               '2022-02-02',
               '2022-02-03',
               '2022-02-04',
               '2022-02-05',
               '2022-02-06',
               '2022-04-04',
               '2022-04-05',
               '2022-05-02',
               '2022-05-03',
               '2022-05-04',
               '2022-06-03',
               '2022-09-12',
               '2022-10-01',
               '2022-10-02',
               '2022-10-03',
               '2022-10-04',
               '2022-10-05',
               '2022-10-06',
               '2022-10-07']

    for d in removeList:
        qlDate = ql.DateParser.parseFormatted(d, '%Y-%m-%d')
        calendar.removeHoliday(qlDate)

    for d in addList:
        qlDate = ql.DateParser.parseFormatted(d, '%Y-%m-%d')
        calendar.addHoliday(qlDate)

    return calendar


if __name__ == '__main__':
    ca = ql.China()
    d = ql.Date(7, 5, 2022)
    print(ca.isHoliday(d))

    ca = calendarModifyChina(ca)
    print(ca.isHoliday(d))
