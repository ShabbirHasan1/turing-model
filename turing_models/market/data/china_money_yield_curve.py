import pandas as pd
import plotly.express as px
from datetime import datetime
from turing_models.market.curves.curve_generation import CurveGeneration
from turing_models.market.data.plotly_layout import default_line_layout, default_xaxis_selector

dates = [0.0000, 0.0800, 0.1000, 0.1700, 0.2000, 0.2500, 0.3000, 0.4000, 0.5000, 0.6000, 0.7000, 0.7500, 0.8000, 0.9000,
         1.0000, 1.1000, 1.2000, 1.3000, 1.4000, 1.5000, 1.6000, 1.7000, 1.8000, 1.9000, 2.0000, 2.1000, 2.2000, 2.3000,
         2.4000, 2.5000, 2.6000, 2.7000, 2.8000, 2.9000, 3.0000, 3.1000, 3.2000, 3.3000, 3.4000, 3.5000, 3.6000, 3.7000,
         3.8000, 3.9000, 4.0000, 4.1000, 4.2000, 4.3000, 4.4000, 4.5000, 4.6000, 4.7000, 4.8000, 4.9000, 5.0000, 5.1000,
         5.2000, 5.3000, 5.4000, 5.5000, 5.6000, 5.7000, 5.8000, 5.9000, 6.0000, 6.1000, 6.2000, 6.3000, 6.4000, 6.5000,
         6.6000, 6.7000, 6.8000, 6.9000, 7.0000, 7.1000, 7.2000, 7.3000, 7.4000, 7.5000, 7.6000, 7.7000, 7.8000, 7.9000,
         8.0000, 8.1000, 8.2000, 8.3000, 8.4000, 8.5000, 8.6000, 8.7000, 8.8000, 8.9000, 9.0000, 9.1000, 9.2000, 9.3000,
         9.4000, 9.5000, 9.6000, 9.7000, 9.8000, 9.9000, 10.0000, 10.1000, 10.2000, 10.3000, 10.4000, 10.5000, 10.6000,
         10.7000, 10.8000, 10.9000, 11.0000, 11.1000, 11.2000, 11.3000, 11.4000, 11.5000, 11.6000, 11.7000, 11.8000,
         11.9000, 12.0000, 12.1000, 12.2000, 12.3000, 12.4000, 12.5000, 12.6000, 12.7000, 12.8000, 12.9000, 13.0000,
         13.1000, 13.2000, 13.3000, 13.4000, 13.5000, 13.6000, 13.7000, 13.8000, 13.9000, 14.0000, 14.1000, 14.2000,
         14.3000, 14.4000, 14.5000, 14.6000, 14.7000, 14.8000, 14.9000, 15.0000, 15.1000, 15.2000, 15.3000, 15.4000,
         15.5000, 15.6000, 15.7000, 15.8000, 15.9000, 16.0000, 16.1000, 16.2000, 16.3000, 16.4000, 16.5000, 16.6000,
         16.7000, 16.8000, 16.9000, 17.0000, 17.1000, 17.2000, 17.3000, 17.4000, 17.5000, 17.6000, 17.7000, 17.8000,
         17.9000, 18.0000, 18.1000, 18.2000, 18.3000, 18.4000, 18.5000, 18.6000, 18.7000, 18.8000, 18.9000, 19.0000,
         19.1000, 19.2000, 19.3000, 19.4000, 19.5000, 19.6000, 19.7000, 19.8000, 19.9000, 20.0000, 20.1000, 20.2000,
         20.3000, 20.4000, 20.5000, 20.6000, 20.7000, 20.8000, 20.9000, 21.0000, 21.1000, 21.2000, 21.3000, 21.4000,
         21.5000, 21.6000, 21.7000, 21.8000, 21.9000, 22.0000, 22.1000, 22.2000, 22.3000, 22.4000, 22.5000, 22.6000,
         22.7000, 22.8000, 22.9000, 23.0000, 23.1000, 23.2000, 23.3000, 23.4000, 23.5000, 23.6000, 23.7000, 23.8000,
         23.9000, 24.0000, 24.1000, 24.2000, 24.3000, 24.4000, 24.5000, 24.6000, 24.7000, 24.8000, 24.9000, 25.0000,
         25.1000, 25.2000, 25.3000, 25.4000, 25.5000, 25.6000, 25.7000, 25.8000, 25.9000, 26.0000, 26.1000, 26.2000,
         26.3000, 26.4000, 26.5000, 26.6000, 26.7000, 26.8000, 26.9000, 27.0000, 27.1000, 27.2000, 27.3000, 27.4000,
         27.5000, 27.6000, 27.7000, 27.8000, 27.9000, 28.0000, 28.1000, 28.2000, 28.3000, 28.4000, 28.5000, 28.6000,
         28.7000, 28.8000, 28.9000, 29.0000, 29.1000, 29.2000, 29.3000, 29.4000, 29.5000, 29.6000, 29.7000, 29.8000,
         29.9000, 30.0000, 30.1000, 30.2000, 30.3000, 30.4000, 30.5000, 30.6000, 30.7000, 30.8000, 30.9000, 31.0000,
         31.1000, 31.2000, 31.3000, 31.4000, 31.5000, 31.6000, 31.7000, 31.8000, 31.9000, 32.0000, 32.1000, 32.2000,
         32.3000, 32.4000, 32.5000, 32.6000, 32.7000, 32.8000, 32.9000, 33.0000, 33.1000, 33.2000, 33.3000, 33.4000,
         33.5000, 33.6000, 33.7000, 33.8000, 33.9000, 34.0000, 34.1000, 34.2000, 34.3000, 34.4000, 34.5000, 34.6000,
         34.7000, 34.8000, 34.9000, 35.0000, 35.1000, 35.2000, 35.3000, 35.4000, 35.5000, 35.6000, 35.7000, 35.8000,
         35.9000, 36.0000, 36.1000, 36.2000, 36.3000, 36.4000, 36.5000, 36.6000, 36.7000, 36.8000, 36.9000, 37.0000,
         37.1000, 37.2000, 37.3000, 37.4000, 37.5000, 37.6000, 37.7000, 37.8000, 37.9000, 38.0000, 38.1000, 38.2000,
         38.3000, 38.4000, 38.5000, 38.6000, 38.7000, 38.8000, 38.9000, 39.0000, 39.1000, 39.2000, 39.3000, 39.4000,
         39.5000, 39.6000, 39.7000, 39.8000, 39.9000, 40.0000, 40.1000, 40.2000, 40.3000, 40.4000, 40.5000, 40.6000,
         40.7000, 40.8000, 40.9000, 41.0000, 41.1000, 41.2000, 41.3000, 41.4000, 41.5000, 41.6000, 41.7000, 41.8000,
         41.9000, 42.0000, 42.1000, 42.2000, 42.3000, 42.4000, 42.5000, 42.6000, 42.7000, 42.8000, 42.9000, 43.0000,
         43.1000, 43.2000, 43.3000, 43.4000, 43.5000, 43.6000, 43.7000, 43.8000, 43.9000, 44.0000, 44.1000, 44.2000,
         44.3000, 44.4000, 44.5000, 44.6000, 44.7000, 44.8000, 44.9000, 45.0000, 45.1000, 45.2000, 45.3000, 45.4000,
         45.5000, 45.6000, 45.7000, 45.8000, 45.9000, 46.0000, 46.1000, 46.2000, 46.3000, 46.4000, 46.5000, 46.6000,
         46.7000, 46.8000, 46.9000, 47.0000, 47.1000, 47.2000, 47.3000, 47.4000, 47.5000, 47.6000, 47.7000, 47.8000,
         47.9000, 48.0000, 48.1000, 48.2000, 48.3000, 48.4000, 48.5000, 48.6000, 48.7000, 48.8000, 48.9000, 49.0000,
         49.1000, 49.2000, 49.3000, 49.4000, 49.5000, 49.6000, 49.7000, 49.8000, 49.9000, 50.0000]
rates_percent = [1.3841, 1.4126, 1.4204, 1.5139, 1.6354, 1.8328, 1.9018, 1.9564, 1.9588, 1.9438, 1.9310, 1.9372, 1.9650, 2.0540,
         2.1332, 2.1907, 2.2366, 2.2760, 2.3143, 2.3568, 2.3968, 2.4265, 2.4496, 2.4696, 2.4900, 2.5070, 2.5162, 2.5206,
         2.5235, 2.5280, 2.5349, 2.5428, 2.5514, 2.5600, 2.5684, 2.5760, 2.5827, 2.5890, 2.5951, 2.6015, 2.6076, 2.6128,
         2.6176, 2.6222, 2.6271, 2.6321, 2.6370, 2.6418, 2.6466, 2.6514, 2.6567, 2.6628, 2.6692, 2.6757, 2.6820, 2.6895,
         2.6993, 2.7104, 2.7219, 2.7327, 2.7433, 2.7548, 2.7668, 2.7789, 2.7907, 2.8014, 2.8107, 2.8192, 2.8275, 2.8361,
         2.8431, 2.8469, 2.8489, 2.8504, 2.8528, 2.8554, 2.8570, 2.8581, 2.8589, 2.8601, 2.8614, 2.8623, 2.8630, 2.8637,
         2.8644, 2.8651, 2.8656, 2.8659, 2.8662, 2.8665, 2.8668, 2.8670, 2.8671, 2.8671, 2.8671, 2.8672, 2.8672, 2.8672,
         2.8672, 2.8672, 2.8673, 2.8676, 2.8681, 2.8685, 2.8689, 2.8704, 2.8737, 2.8779, 2.8824, 2.8865, 2.8912, 2.8977,
         2.9053, 2.9131, 2.9205, 2.9282, 2.9373, 2.9473, 2.9575, 2.9673, 2.9773, 2.9884, 3.0000, 3.0118, 3.0233, 3.0349,
         3.0471, 3.0597, 3.0723, 3.0848, 3.0972, 3.1098, 3.1225, 3.1352, 3.1479, 3.1603, 3.1724, 3.1844, 3.1964, 3.2084,
         3.2200, 3.2309, 3.2413, 3.2516, 3.2621, 3.2721, 3.2807, 3.2887, 3.2964, 3.3046, 3.3119, 3.3175, 3.3220, 3.3263,
         3.3311, 3.3356, 3.3388, 3.3412, 3.3434, 3.3461, 3.3488, 3.3511, 3.3531, 3.3551, 3.3573, 3.3593, 3.3609, 3.3623,
         3.3637, 3.3652, 3.3666, 3.3677, 3.3686, 3.3694, 3.3704, 3.3713, 3.3719, 3.3724, 3.3728, 3.3734, 3.3739, 3.3742,
         3.3744, 3.3746, 3.3747, 3.3748, 3.3749, 3.3749, 3.3749, 3.3749, 3.3749, 3.3748, 3.3747, 3.3747, 3.3746, 3.3745,
         3.3744, 3.3744, 3.3743, 3.3743, 3.3743, 3.3744, 3.3745, 3.3746, 3.3747, 3.3749, 3.3752, 3.3756, 3.3760, 3.3764,
         3.3769, 3.3775, 3.3782, 3.3790, 3.3797, 3.3805, 3.3814, 3.3824, 3.3835, 3.3845, 3.3855, 3.3867, 3.3880, 3.3893,
         3.3906, 3.3919, 3.3934, 3.3949, 3.3965, 3.3980, 3.3995, 3.4012, 3.4030, 3.4047, 3.4065, 3.4083, 3.4101, 3.4121,
         3.4141, 3.4160, 3.4180, 3.4201, 3.4222, 3.4243, 3.4264, 3.4286, 3.4308, 3.4331, 3.4354, 3.4377, 3.4400, 3.4423,
         3.4447, 3.4472, 3.4496, 3.4520, 3.4545, 3.4570, 3.4595, 3.4620, 3.4645, 3.4671, 3.4697, 3.4722, 3.4748, 3.4774,
         3.4800, 3.4827, 3.4853, 3.4880, 3.4906, 3.4932, 3.4959, 3.4986, 3.5012, 3.5039, 3.5065, 3.5092, 3.5119, 3.5145,
         3.5172, 3.5198, 3.5224, 3.5250, 3.5276, 3.5302, 3.5328, 3.5354, 3.5379, 3.5405, 3.5430, 3.5455, 3.5480, 3.5504,
         3.5529, 3.5553, 3.5577, 3.5600, 3.5623, 3.5647, 3.5669, 3.5691, 3.5713, 3.5734, 3.5756, 3.5777, 3.5797, 3.5816,
         3.5834, 3.5853, 3.5872, 3.5890, 3.5906, 3.5923, 3.5940, 3.5957, 3.5972, 3.5987, 3.6001, 3.6016, 3.6031, 3.6044,
         3.6057, 3.6070, 3.6083, 3.6095, 3.6107, 3.6118, 3.6129, 3.6140, 3.6151, 3.6162, 3.6171, 3.6181, 3.6191, 3.6200,
         3.6209, 3.6217, 3.6225, 3.6234, 3.6242, 3.6250, 3.6257, 3.6264, 3.6271, 3.6278, 3.6285, 3.6291, 3.6297, 3.6304,
         3.6310, 3.6316, 3.6321, 3.6327, 3.6332, 3.6338, 3.6343, 3.6348, 3.6353, 3.6358, 3.6363, 3.6368, 3.6373, 3.6378,
         3.6382, 3.6387, 3.6392, 3.6397, 3.6401, 3.6406, 3.6411, 3.6416, 3.6421, 3.6426, 3.6430, 3.6435, 3.6441, 3.6446,
         3.6451, 3.6457, 3.6462, 3.6468, 3.6474, 3.6480, 3.6486, 3.6492, 3.6498, 3.6505, 3.6512, 3.6519, 3.6526, 3.6534,
         3.6542, 3.6550, 3.6558, 3.6567, 3.6576, 3.6585, 3.6595, 3.6604, 3.6614, 3.6625, 3.6636, 3.6648, 3.6659, 3.6670,
         3.6682, 3.6694, 3.6705, 3.6717, 3.6729, 3.6740, 3.6752, 3.6763, 3.6774, 3.6786, 3.6797, 3.6808, 3.6819, 3.6830,
         3.6841, 3.6852, 3.6863, 3.6874, 3.6885, 3.6896, 3.6907, 3.6918, 3.6928, 3.6939, 3.6950, 3.6960, 3.6971, 3.6982,
         3.6992, 3.7003, 3.7013, 3.7024, 3.7034, 3.7045, 3.7055, 3.7066, 3.7076, 3.7087, 3.7097, 3.7108, 3.7118, 3.7128,
         3.7139, 3.7149, 3.7160, 3.7170, 3.7181, 3.7191, 3.7201, 3.7212, 3.7222, 3.7233, 3.7243, 3.7254, 3.7264, 3.7275,
         3.7285, 3.7296, 3.7307, 3.7317, 3.7328, 3.7339, 3.7349, 3.7360, 3.7371, 3.7382, 3.7393, 3.7404, 3.7414, 3.7425,
         3.7436, 3.7448, 3.7459, 3.7470, 3.7481, 3.7493, 3.7504, 3.7515, 3.7527, 3.7538, 3.7550, 3.7562, 3.7574, 3.7585,
         3.7597, 3.7609, 3.7622, 3.7634, 3.7646, 3.7658, 3.7671, 3.7683, 3.7696, 3.7709, 3.7721, 3.7734, 3.7747, 3.7761,
         3.7774]

rates = [rate/100 for rate in rates_percent]


def china_money_spot_curve():
    return pd.Series(data=rates, index=dates)


def china_money_spot_figure():
    curve_origin = china_money_spot_curve()
    curve_gen = CurveGeneration(curve_origin.index.tolist(), curve_origin.tolist())
    curve_data = curve_gen.get_data_dict()
    terms, spot_rates = list(curve_data.keys()), list(curve_data.values())
    terms = [datetime.strftime(d, '%Y-%m-%d') for d in terms]

    fig = px.line(x=terms, y=spot_rates, title="Spot Rates")

    fig.update_xaxes(default_xaxis_selector())
    fig.update_layout(default_line_layout(x_title="Dates", y_title="Rates"))
    return fig


if __name__ == "__main__":
    df = china_money_spot_curve()
    print(df)